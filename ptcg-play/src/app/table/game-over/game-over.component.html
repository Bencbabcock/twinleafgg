<div class="ptcg-game-over-overlay">
  <!-- Animated background particles -->
  <!-- <div class="ptcg-particles"></div> -->

  <!-- Top gradient section with diagonal cut -->
  <div class="ptcg-game-over-top">
    <!-- Diagonal divider -->
    <div class="ptcg-diagonal-divider"></div>

    <!-- Victory text -->
    <div class="ptcg-victory-header">
      <h1 class="ptcg-game-over-title" *ngIf="isWinner">Victory!</h1>
      <h1 class="ptcg-game-over-title" *ngIf="!isWinner && prompt.winner !== GameWinner.DRAW">Defeat</h1>
      <h1 class="ptcg-game-over-title" *ngIf="prompt.winner === GameWinner.DRAW">Draw</h1>
    </div>

    <!-- Player avatars and VS -->
    <div class="ptcg-player-avatars">
      <!-- <div class="ptcg-player-avatar player">
                    <span class="ptcg-avatar-letter">P</span>
                  </div> -->
      <span class="ptcg-player-name">{{ playerUsername }}</span>
      <span class="ptcg-vs-text">vs.</span>
      <!-- <div class="ptcg-player-avatar opponent">
                    <span class="ptcg-avatar-letter">O</span>
                  </div> -->
      <span class="ptcg-player-name">{{ opponentUsername }}</span>
    </div>
  </div>

  <!-- Main content -->
  <div class="ptcg-game-over-content">
    <!-- Battle Log button -->
    <div class="ptcg-battle-log">
      <!-- <button class="ptcg-battle-log-button">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round" class="ptcg-icon">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        Battle Log
      </button> -->
    </div>

    <!-- Stats and Card grid -->
    <div class="ptcg-game-over-grid">
      <!-- Left column - Stats -->
      <div class="ptcg-stats-container">
        <div class="ptcg-stats-row">
          <span class="ptcg-stat-label">Turn order</span>
          <span class="ptcg-stat-value">Went {{wentFirst ? 'first' : 'second'}}</span>
        </div>

        <div class="ptcg-stats-row">
          <span class="ptcg-stat-label">Turns played</span>
          <span class="ptcg-stat-value">{{gameState.state.turn}}</span>
        </div>

        <div class="ptcg-stats-row">
          <span class="ptcg-stat-label">Your prizes taken</span>
          <div class="ptcg-prize-indicators">
            <div class="ptcg-prize-indicator" [class.ptcg-prize-taken]="playerPrizesTaken >= 1">1</div>
            <div class="ptcg-prize-indicator" [class.ptcg-prize-taken]="playerPrizesTaken >= 2">2</div>
            <div class="ptcg-prize-indicator" [class.ptcg-prize-taken]="playerPrizesTaken >= 3">3</div>
            <div class="ptcg-prize-indicator" [class.ptcg-prize-taken]="playerPrizesTaken >= 4">4</div>
            <div class="ptcg-prize-indicator" [class.ptcg-prize-taken]="playerPrizesTaken >= 5">5</div>
            <div class="ptcg-prize-indicator" [class.ptcg-prize-taken]="playerPrizesTaken >= 6">6</div>
          </div>
        </div>

        <div class="ptcg-stats-row">
          <span class="ptcg-stat-label">Opponent's prizes taken</span>
          <div class="ptcg-prize-indicators">
            <div class="ptcg-prize-indicator" [class.ptcg-prize-opponent-taken]="opponentPrizesTaken >= 1">1</div>
            <div class="ptcg-prize-indicator" [class.ptcg-prize-opponent-taken]="opponentPrizesTaken >= 2">2</div>
            <div class="ptcg-prize-indicator" [class.ptcg-prize-opponent-taken]="opponentPrizesTaken >= 3">3</div>
            <div class="ptcg-prize-indicator" [class.ptcg-prize-opponent-taken]="opponentPrizesTaken >= 4">4</div>
            <div class="ptcg-prize-indicator" [class.ptcg-prize-opponent-taken]="opponentPrizesTaken >= 5">5</div>
            <div class="ptcg-prize-indicator" [class.ptcg-prize-opponent-taken]="opponentPrizesTaken >= 6">6</div>
          </div>
        </div>

        <!-- <div class="ptcg-stats-row">
          <span class="ptcg-stat-label">Damage dealt</span>
          <span class="ptcg-stat-value">{{playerDamageDealt}}</span>
        </div> -->
      </div>

      <!-- Right column - Card of the Game -->
      <div class="ptcg-card-feature">
        <!-- Card of the Game title -->
        <div class="ptcg-card-title-container">
          <h3 class="ptcg-card-title">Card of the Game</h3>
          <div *ngIf="isWinner && topPokemon && topPokemon.reason === 'knockout'" class="ptcg-knockout-badge">
            Last Knocked Out
          </div>
        </div>

        <!-- Featured card with proper aspect ratio -->
        <div class="ptcg-featured-card-container">
          <div class="ptcg-card-perspective">
            <div class="ptcg-card-holder">
              <div *ngIf="topPokemon" class="ptcg-top-pokemon">
                <ptcg-card [card]="topPokemon.card"></ptcg-card>
              </div>
              <div *ngIf="!topPokemon" class="ptcg-card-placeholder">
                <div class="ptcg-card-back"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- OK Button -->
    <div class="ptcg-actions">
      <button class="ptcg-ok-button" (click)="confirm()">OK</button>
    </div>
  </div>
</div>